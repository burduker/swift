-#coding:utf-8
!!! 5
%html
  %head
    %meta{ :charset => "utf-8" }
    %link{ :rel => "shortcut icon", :href => "/images/swift32.png" }
    %title Swift Admin
    /[if lt IE 9]
      %script{ :src => "http://html5shim.googlecode.com/svn/trunk/html5.js" }
    = stylesheet_link_tag '/assets/bootstrap'
    = stylesheet_link_tag '/assets/admin'
    /[if IE]
      = stylesheet_link_tag '/assets/jquery.ui.1.8.16.ie.css'
    %script{ :src => "/assets/admin-libraries.js" }
    %script{ :src => '/assets/admin-core.js' }

  %body
    .topbar
      .topbar-inner
        .container-fluid
          = link_to 'Swift Admin', url(:base_index), :class => 'brand'
          -#%ul.nav
            -project_modules.each do |project_module|
              %li{:class => ('active' if request.path_info =~ /^#{project_module.path}/)}
                =link_to project_module.human_name, project_module.path('/admin')
          %ul.nav.secondary-nav
            - #%li= link_to 'Profile', url(:accounts, :edit, :id => current_account.id)
            %li= button_to 'Logout', url(:sessions, :destroy), :method => :delete
    .container-fluid
      - [:error, :warning, :success].each do |type|
        - next  if flash[type].blank?
        .alert-message(class=type data-alert=true)
          = link_to '&times;', '#', :class => :close
          = flash[type]
      - if @object && @object.dirty?
        - err = @object.errors.to_hash.select{|k,v|v.any?}.map{|k,v|v.join}.join('<br>')
        - unless err.blank?
          .alert-message.error= err
      - sidebar = yield_content(:sidebar) || partial("base/sidebar")
      .sidebar
        = sidebar
      .content
        = yield
